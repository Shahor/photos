/**
* jquery.maximizer - jQuery plugin for scaling images
* Copyright 2010 Jarek Zmudzinski
* Fork and simplified by Florent Solt
* Released under the MIT and GPL licenses.
* @requires jQuery
*/jQuery(function(e){e.fn.maximize=function(t){if(!this.length)return this;var n=e.extend({},e.fn.maximize.defaults,t);return this.each(function(){var t=e(this).find("img"),r=e(this),i=r.find("div"),s=i.outerHeight(!0)-i.height(),o=t.outerWidth(!0)-t.width(),u=t.outerHeight(!0)-t.height(),a={},f={},l;a[n.align]=0,f[n.align]=0,e(this).css(e.extend({position:"fixed",top:0,width:"100%",height:"100%",overflow:"hidden"},a)),t.css(e.extend({position:"absolute",top:0,left:0,margin:0,padding:0},f));var c=function(){var a=e(window).height(),f=e(window).width(),l,c,h,p=r.data("img_size")||{width:t.width(),height:t.height(),ratio:t.width()/t.height()};i.length&&i.height(a-s),a=i.height(),f=i.width(),l=f/a,r.trigger("maximizerResize.maximize",[f,a]),n.resize==="crop"?l>p.ratio?(c=f,h=f/p.ratio):(c=a*p.ratio,h=a):l<p.ratio?(c=f-o,n.zoomInLimit>0&&c>p.width*n.zoomInLimit&&(c=p.width*n.zoomInLimit),n.maxWidth>0&&c>n.maxWidth&&(c=n.maxWidth),h=c/p.ratio,n.maxHeight>0&&h>n.maxHeight&&(h=n.maxHeight,c=h*p.ratio)):(h=a-u,n.zoomInLimit>0&&h>p.height*n.zoomInLimit&&(h=p.height*n.zoomInLimit),n.maxHeight>0&&h>n.maxHeight&&(h=n.maxHeight),c=h*p.ratio,n.maxWidth>0&&c>n.maxWidth&&(c=n.maxWidth,h=c/p.ratio)),t.width(c).height(h),e.inArray(n.center,["both","horizontal"])!==-1&&t.css({left:(f-c)/2}),e.inArray(n.center,["both","vertical"])!==-1&&t.css({top:(a-h)/2})};l=setInterval(function(){var e,n;t[0].complete&&(e=t.width(),n=t.height(),n>0&&e>0&&(r.data("img_size",{width:e,height:n,ratio:e/n}),c(),r.trigger("imageReady",[t,r]),clearInterval(l)))},50),e(window).bind("resize",function(){c()})})},e.fn.maximize.defaults={center:"both",align:"left",resize:"crop",zoomInLimit:0,maxWidth:0,maxHeight:0}});